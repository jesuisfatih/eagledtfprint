import { PrismaService } from '../prisma/prisma.service';
export declare class OrdersService {
    private prisma;
    constructor(prisma: PrismaService);
    private extractDesignFiles;
    private isUrl;
    private detectPickup;
    private mapOrder;
    private mapFinancialToStatus;
    private mapPaymentStatus;
    findAll(merchantId: string, filters?: {
        companyId?: string;
        status?: string;
        pickupOnly?: boolean;
        hasDesignFiles?: boolean;
    }): Promise<{
        id: any;
        orderNumber: any;
        shopifyOrderNumber: any;
        shopifyOrderId: number | null;
        status: string;
        paymentStatus: string;
        financialStatus: any;
        fulfillmentStatus: any;
        totalPrice: any;
        subtotal: any;
        totalTax: any;
        totalDiscounts: any;
        totalShipping: any;
        totalRefunded: any;
        currency: any;
        email: any;
        phone: any;
        lineItems: any;
        shippingAddress: any;
        billingAddress: any;
        discountCodes: any;
        fulfillments: any;
        refunds: any;
        notes: any;
        tags: any;
        riskLevel: any;
        designFiles: any[];
        hasDesignFiles: boolean;
        isPickup: boolean;
        pickupOrder: {
            id: any;
            status: any;
            qrCode: any;
            shelfCode: any;
            shelfName: any;
            assignedAt: any;
            readyAt: any;
            pickedUpAt: any;
        } | null;
        processedAt: any;
        cancelledAt: any;
        closedAt: any;
        company: any;
        companyUser: any;
        createdAt: any;
        updatedAt: any;
    }[]>;
    findOne(id: string, merchantId: string, companyId?: string): Promise<{
        id: any;
        orderNumber: any;
        shopifyOrderNumber: any;
        shopifyOrderId: number | null;
        status: string;
        paymentStatus: string;
        financialStatus: any;
        fulfillmentStatus: any;
        totalPrice: any;
        subtotal: any;
        totalTax: any;
        totalDiscounts: any;
        totalShipping: any;
        totalRefunded: any;
        currency: any;
        email: any;
        phone: any;
        lineItems: any;
        shippingAddress: any;
        billingAddress: any;
        discountCodes: any;
        fulfillments: any;
        refunds: any;
        notes: any;
        tags: any;
        riskLevel: any;
        designFiles: any[];
        hasDesignFiles: boolean;
        isPickup: boolean;
        pickupOrder: {
            id: any;
            status: any;
            qrCode: any;
            shelfCode: any;
            shelfName: any;
            assignedAt: any;
            readyAt: any;
            pickedUpAt: any;
        } | null;
        processedAt: any;
        cancelledAt: any;
        closedAt: any;
        company: any;
        companyUser: any;
        createdAt: any;
        updatedAt: any;
    } | null>;
    getStats(merchantId: string, companyId?: string): Promise<{
        total: number;
        totalRevenue: number | import("@prisma/client-runtime-utils").Decimal;
        totalRefunded: number | import("@prisma/client-runtime-utils").Decimal;
        totalShipping: number | import("@prisma/client-runtime-utils").Decimal;
        refundedCount: number;
        fulfilledCount: number;
        fulfillmentRate: string;
        pickupCount: any;
    }>;
    getCustomerJourney(merchantId: string, shopifyCustomerId: string): Promise<{
        customer: {
            id: string;
            email: string | null;
            firstName: string | null;
            lastName: string | null;
            ordersCount: number;
            totalSpent: import("@prisma/client-runtime-utils").Decimal | null;
            tags: string | null;
            insight: {
                id: string;
                createdAt: Date;
                updatedAt: Date;
                shopifyCustomerId: string;
                lastOrderAt: Date | null;
                avgOrderValue: import("@prisma/client-runtime-utils").Decimal | null;
                firstOrderAt: Date | null;
                daysSinceLastOrder: number | null;
                churnRisk: string | null;
                clvScore: import("@prisma/client-runtime-utils").Decimal | null;
                projectedClv: import("@prisma/client-runtime-utils").Decimal | null;
                clvTier: string | null;
                rfmRecency: number | null;
                rfmFrequency: number | null;
                rfmMonetary: number | null;
                rfmSegment: string | null;
                healthScore: number | null;
                avgDaysBetweenOrders: number | null;
                purchaseFrequency: string | null;
                preferredCategories: import("@prisma/client/runtime/client").JsonValue | null;
                preferredVendors: import("@prisma/client/runtime/client").JsonValue | null;
                maxOrderValue: import("@prisma/client-runtime-utils").Decimal | null;
                orderTrend: string | null;
                customerSince: Date | null;
                isReturning: boolean;
                deepMetrics: import("@prisma/client/runtime/client").JsonValue | null;
                calculatedAt: Date;
            } | null;
        } | null;
        journey: {
            timeline: any[];
            metrics: {
                totalSessions: number;
                totalPageViews: number;
                totalProductViews: number;
                totalAddToCarts: number;
                totalOrders: number;
                totalCarts: number;
                totalRevenue: number;
                totalSessionDuration: number;
                avgSessionDuration: number;
                timeToFirstOrderDays: number | null;
                conversionRate: string;
                designFileOrderCount: number;
                designFileRate: string;
                firstVisit: Date | null;
                firstOrder: Date | null;
                lastOrder: Date | null;
                lastSession: Date | null;
            };
        };
    }>;
    getJourneyFunnel(merchantId: string): Promise<{
        funnel: {
            stage: string;
            label: string;
            count: number;
            icon: string;
        }[];
        conversionRates: {
            visitorToIdentified: string;
            identifiedToCart: string;
            cartToOrder: string;
            orderToRepeat: string;
            overallConversion: string;
        };
        totalOrders: number;
        pickupOrders: any;
    }>;
}
